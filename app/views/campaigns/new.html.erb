<% content_for :title, "New Campaign - RapidMarkt" %>

<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 mt-2 mb-12">
  <!-- Page header -->
  <div class="mb-8">
    <nav class="flex" aria-label="Breadcrumb">
      <ol role="list" class="flex items-center space-x-4">
        <li>
          <div>
            <%= link_to campaigns_path, class: "text-gray-400 hover:text-gray-500" do %>
              <svg class="flex-shrink-0 h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z" clip-rule="evenodd" />
              </svg>
              <span class="sr-only">Back</span>
            <% end %>
          </div>
        </li>
        <li>
          <div class="flex items-center">
            <svg class="flex-shrink-0 h-5 w-5 text-gray-300" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
            </svg>
            <%= link_to "Campaigns", campaigns_path, class: "ml-4 text-sm font-medium text-gray-500 hover:text-gray-700" %>
          </div>
        </li>
        <li>
          <div class="flex items-center">
            <svg class="flex-shrink-0 h-5 w-5 text-gray-300" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
            </svg>
            <span class="ml-4 text-sm font-medium text-gray-500">New Campaign</span>
          </div>
        </li>
      </ol>
    </nav>
    
    <div class="mt-4">
      <h1 class="text-3xl font-bold text-gray-900">Create New Campaign</h1>
      <p class="mt-2 text-sm text-gray-700">
        Design and schedule your email marketing campaign to reach your audience.
      </p>
    </div>
  </div>

  <!-- Debug: Test visibility -->
  <div class="mb-6 p-4 bg-green-100 border border-green-300 rounded-lg" style="background-color: #dcfce7 !important; border: 2px solid #16a34a !important; padding: 16px !important; margin-bottom: 24px !important;">
    <h3 class="text-green-800 font-semibold" style="color: #166534 !important; font-weight: 600 !important;">âœ… About to render campaign form</h3>
    <p class="text-green-700 text-sm" style="color: #15803d !important; font-size: 14px !important;">Campaign object: <%= @campaign.inspect %></p>
    <p class="text-green-700 text-sm" style="color: #15803d !important; font-size: 14px !important;">Current account: <%= @current_account&.name %></p>
  </div>

  <!-- SUPER OBVIOUS TEST -->
  <div style="background-color: red !important; color: white !important; padding: 20px !important; font-size: 24px !important; font-weight: bold !important; text-align: center !important; border: 5px solid black !important;">
    ðŸš¨ IF YOU CAN SEE THIS RED BOX, THE PAGE IS WORKING! ðŸš¨
  </div>

  <!-- Campaign form -->
  <div style="background-color: yellow !important; padding: 20px !important; margin: 20px 0 !important; border: 3px solid orange !important;">
    <h3 style="color: black !important; font-size: 20px !important; font-weight: bold !important;">ðŸŸ¡ SIMPLE TEST FORM ðŸŸ¡</h3>

    <div style="background-color: white !important; padding: 20px !important; margin: 10px 0 !important; border: 1px solid gray !important;">
      <%= form_with model: @campaign, local: true do |form| %>
        <div style="margin-bottom: 15px !important;">
          <label style="display: block !important; font-weight: bold !important; margin-bottom: 5px !important;">Campaign Name:</label>
          <%= form.text_field :name, style: "width: 100% !important; padding: 8px !important; border: 1px solid #ccc !important;" %>
        </div>
        <div style="margin-bottom: 15px !important;">
          <label style="display: block !important; font-weight: bold !important; margin-bottom: 5px !important;">Subject:</label>
          <%= form.text_field :subject, style: "width: 100% !important; padding: 8px !important; border: 1px solid #ccc !important;" %>
        </div>
        <div>
          <%= form.submit "Create Campaign", style: "background-color: #2563eb !important; color: white !important; padding: 10px 20px !important; border: none !important; cursor: pointer !important;" %>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Original wizard form (testing with simplified version) -->
  <%= render 'form_simple', campaign: @campaign %>
</div>